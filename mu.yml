environments:
- name: acceptance
  loadbalancer:
    hostedzone: bigbluesign.com
    certificate: "8c43c2a3-1a25-4552-9ee9-804124d4d1d7"
  cluster:
    minSize: 2
    desiredCapacity: 2

service:
  name: karma-angular
  cpu: 256
  memory: 384
  port: 8080
  healthEndpoint: /management/health
  pathPatterns:
  - /*
  database:
    name: karma
    masterUsername: karma
    engine: postgres
  environment:
    SPRING_DATASOURCE_USERNAME: ${DatabaseMasterUsername}
    SPRING_DATASOURCE_PASSWORD: ${DatabaseMasterPassword}
    SPRING_DATASOURCE_URL: jdbc:postgresql://${DatabaseEndpointAddress}:${DatabaseEndpointPort}/${DatabaseName}
  pipeline:
    build:
      image: aws/codebuild/java:openjdk-8
    acceptance:
      image: aws/codebuild/java:openjdk-8
    production:
      disabled: true
    notify:
    - cplee@nektos.com
    - pgrogan@stanfieldsystems.com
    - akebede@stanfieldsystems.com
    - ksingh@stanfieldsystems.com

### configure extension for handling CloudFront and static assets
extensions:
- url: https://github.com/stelligent/mu-cloudfront/archive/v0.4.zip
- url: mu-karma

parameters:
  mu-loadbalancer-acceptance:
    CloudFrontCert: "86a733d7-b890-478b-bc24-4ec0b40ea66d"
  mu-pipeline-.*:
    SourcePath: karma-angular/build/www
